---
//astro imports
import { Icon } from "astro-icon/components";

//icon imports
import { ChevronDown } from "@lucide/astro";

//components imports
import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from "@/starwind/accordion";

const footerLinks = [
  {
    heading: "Categories",
    id: "footer-product-dark",
    links: [
      { label: "Laptops & Computers", link: "#" },
      { label: "Cameras & Photography", link: "#" },
      { label: "Smart Phones & Tablets", link: "#" },
      { label: "Video Games & Consoles", link: "#" },
      { label: "Waterproof Headphones", link: "#" },
    ],
  },
  {
    heading: "Pages",
    id: "footer-about-dark",
    links: [
      { label: "Blog", link: "#" },
      { label: "Browse the Shop", link: "#" },
      { label: "Category", link: "#" },
      { label: "Pre-Built Pages", link: "#" },
      { label: "Visual Composer Elements", link: "#" },
    ],
  },
  {
    heading: "Customer Care",
    id: "footer-docs-dark",
    links: [
      { label: "Support", link: "/support" },
      { label: "My Account", link: "#" },
      { label: "Discount", link: "#" },
      { label: "Returns", link: "#" },
      { label: "Orders History", link: "#" },
      // { label: "Order Tracking", link: "#" },
    ],
  },
];

const socialLinks = [
  {
    name: "Facebook",
    href: "#",
    icon: "brands/facebook",
  },
  {
    name: "X",
    href: "#",
    icon: "brands/x",
  },
  {
    name: "LinkedIn",
    href: "#",
    icon: "brands/linkedin",
  },
  {
    name: "GitHub",
    href: "#",
    icon: "brands/github",
  },
];
---

<!-- START - Footer -->
<footer class="text-emphasis-500">
  <!-- Main footer -->
  <div class="pt-16 pb-12 text-base bg-accent-50">
    <div class="xl:container px-6 mx-auto">
      <div
        class="grid grid-cols-4 gap-4 md:gap-6 md:grid-cols-8 lg:grid-cols-12"
      >
        <div
          class="col-span-4 mb-8 lg:mb-auto md:col-span-8 lg:col-span-4"
          aria-labelledby="footer-header"
        >
          <a
            href="javascript:void(0)"
            class="inline-flex text-3xl font-heading font-bold text-black mb-8"
            >Hekto</a
          >
          <form action="" class="flex mb-6 bg-white rounded-sm p-2">
            <input
              type="text"
              class="form-input flex-1 border-none rounded-0 placeholder:text-emphasis-500"
              placeholder="Enter Email Address"
            />
            <button
              type="button"
              class="inline-block font-semibold bg-primary-500 py-2 px-6 rounded-sm text-white whitespace-nowrap"
            >
              Sign Up
            </button>
          </form>
          <p>Contact Info</p>
          <p>17 Princess Road, London, Greater London NW1 8JR, UK</p>
        </div>
        <div
          class="col-span-4 md:col-span-8 grid grid-cols-1 md:grid-cols-3 gap-10 lg:ml-auto"
        >
          <Accordion
            type="multiple"
            defaultValue="item-1"
            class="md:hidden border-0"
          >
            {
              footerLinks.map(({ heading, id, links }, idx) => (
                <AccordionItem
                  value={`item-${idx + 1}`}
                  class="border-0 first:border-0 last:border-0"
                  style="border: 0"
                >
                  <AccordionTrigger class="text-xl font-heading font-semibold text-black hover:text-black px-0">
                    {heading}
                  </AccordionTrigger>
                  <AccordionContent class="px-0 [&>*:first-child]:px-0">
                    <ul>
                      {links.map(({ label, link }) => (
                        <li class="mb-4 leading-6">
                          <a
                            href={link}
                            class="transition-colors duration-300 hover:text-primary-500 hover:underline focus:text-primary-500"
                          >
                            {label}
                          </a>
                        </li>
                      ))}
                    </ul>
                  </AccordionContent>
                </AccordionItem>
              ))
            }
          </Accordion>
          {
            footerLinks.map(({ heading, id, links }) => (
              <div aria-labelledby={id} class="group hidden md:block border-0">
                <h3
                  class="mb-4 lg:mb-10 text-xl font-heading font-semibold text-black cursor-pointer md:cursor-default md:pointer-events-none "
                  id={id}
                  tabindex="0"
                >
                  {heading}
                </h3>
                <ul>
                  {links.map(({ label, link }) => (
                    <li class="mb-4 leading-6">
                      <a
                        href={link}
                        class="transition-colors duration-300 hover:text-primary-500 hover:underline focus:text-primary-500"
                      >
                        {label}
                      </a>
                    </li>
                  ))}
                </ul>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>
  <!-- Sub Footer -->
  <div class="py-4 text-base bg-accent-100">
    <div class="xl:container px-6 mx-auto">
      <div
        class="grid grid-cols-4 gap-4 md:grid-cols-8 md:gap-6 lg:grid-cols-12"
      >
        <div
          class="col-span-4 text-center md:text-left md:col-span-4 lg:col-span-6 text-tertiary-900"
        >
          Â© Hekto - All Rights Reserved
        </div>
        <nav
          aria-labelledby="footer-social-links-dark"
          class="col-span-4 text-center md:text-right md:col-span-4 lg:col-span-6"
        >
          <h2 class="sr-only" id="footer-social-links-dark">
            Social Media Links
          </h2>
          <ul class="flex items-center justify-center md:justify-end gap-4">
            {
              socialLinks.map(({ name, href, icon }) => (
                <li>
                  <a
                    href={href}
                    class="transition-colors inline-flex items-center justify-center size-8 rounded-full bg-tertiary-950 text-white duration-300 hover:bg-tertiary-950/50"
                    aria-label={name}
                  >
                    <Icon name={icon} class="w-5 h-5 shrink-0" />
                    <title>{name}</title>
                  </a>
                </li>
              ))
            }
          </ul>
        </nav>
      </div>
    </div>
  </div>
</footer>
<!-- END - Footer -->

<!-- <script>
  if (typeof window !== "undefined") {
    document.querySelectorAll("details").forEach((detail) => {
      // On mobile, always start closed
      if (window.innerWidth < 768) {
        detail.open = false;
      } else {
        detail.open = true;
      }
      // Prevent toggling on desktop
      detail.querySelector("summary").addEventListener("click", (e) => {
        if (window.innerWidth >= 768) e.preventDefault();
      });
    });

    // Accordion behavior for mobile
    window.addEventListener("resize", () => {
      document.querySelectorAll("details").forEach((detail) => {
        if (window.innerWidth < 768) {
          detail.open = false;
        } else {
          detail.open = true;
        }
      });
    });
  }
</script>

<script>
  if (typeof window !== "undefined") {
    document.querySelectorAll("details").forEach((detail) => {
      const content = detail.querySelector(".details-content");
      if (!content) return;

      // Set initial state
      if (window.innerWidth < 768) {
        detail.open = false;
        content.style.maxHeight = "0px";
      } else {
        detail.open = true;
        content.style.maxHeight = content.scrollHeight + "px";
      }

      // Prevent toggling on desktop
      detail.querySelector("summary").addEventListener("click", (e) => {
        if (window.innerWidth >= 768) e.preventDefault();
      });

      // Animate open/close
      detail.addEventListener("toggle", () => {
        if (detail.open) {
          content.style.maxHeight = content.scrollHeight + "px";
        } else {
          content.style.maxHeight = "0px";
        }
      });
    });

    // Handle resize
    window.addEventListener("resize", () => {
      document.querySelectorAll("details").forEach((detail) => {
        const content = detail.querySelector(".details-content");
        if (!content) return;
        if (window.innerWidth < 768) {
          detail.open = false;
          content.style.maxHeight = "0px";
        } else {
          detail.open = true;
          content.style.maxHeight = content.scrollHeight + "px";
        }
      });
    });
  }
</script> -->
